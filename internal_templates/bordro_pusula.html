{% extends 'base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white p-8 shadow-sm border border-slate-200 rounded-2xl my-8 print:shadow-none print:border-none print:my-0 print:p-0">
    <!-- Header -->
    <div class="flex justify-between items-start border-b border-slate-200 pb-6 mb-6">
        <div>
            <h1 class="text-2xl font-bold text-slate-900 uppercase">Maaş Ödeme Pusulası</h1>
            <p class="text-slate-500 mt-1">{{ period_name }} Dönemi</p>
        </div>
        <div class="text-right">
            <h2 class="font-bold text-lg text-primary">{{ company_name }}</h2>
            <p class="text-sm text-slate-500">Vergi No: {{ vergi_no }}</p>
        </div>
    </div>

    <!-- Employee Info -->
    <div class="grid grid-cols-2 gap-8 mb-8 bg-slate-50 p-6 rounded-xl border border-slate-100">
        <div>
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Personel Bilgileri</h3>
            <div class="space-y-2">
                <div class="flex justify-between">
                    <span class="text-slate-500 text-sm">Ad Soyad:</span>
                    <span class="font-semibold text-slate-900 text-sm">{{ result.name }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-500 text-sm">Personel ID:</span>
                    <span class="font-semibold text-slate-900 text-sm">#{{ result.personel_id }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-500 text-sm">Departman:</span>
                    <span class="font-semibold text-slate-900 text-sm">{{ result.department }}</span>
                </div>
            </div>
        </div>
        <div>
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Çalışma Bilgileri</h3>
            <div class="space-y-2">
                <div class="flex justify-between">
                    <span class="text-slate-500 text-sm">Toplam Çalışma:</span>
                    <span class="font-semibold text-slate-900 text-sm">{{ "%.1f"|format(result.total_work_hours) }} Saat</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-500 text-sm">Fazla Mesai:</span>
                    <span class="font-semibold text-slate-900 text-sm">{{ "%.1f"|format(result.overtime_hours) }} Saat</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-500 text-sm text-red-500">Eksik/Gelmedi:</span>
                    <span class="font-semibold text-red-600 text-sm">{{ "%.1f"|format(result.missing_hours) }} Saat</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-500 text-sm">Mesai Ücreti (Saat):</span>
                    <span class="font-semibold text-slate-900 text-sm">₺{{ "{:,.2f}".format(result.overtime_rate) }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Earnings & Deductions -->
    <div class="grid grid-cols-2 gap-12 mb-8">
        <!-- Earnings -->
        <div>
            <h3 class="text-sm font-bold text-slate-900 mb-4 border-b border-slate-100 pb-2">Kazançlar</h3>
            <div class="space-y-3">
                <div class="flex justify-between text-sm">
                    <span class="text-slate-600">Aylık Net Maaş</span>
                    <span class="font-medium text-slate-900">₺{{ "{:,.2f}".format(result.net_salary) }}</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-slate-600">Fazla Mesai Ücreti</span>
                    <span class="font-medium text-slate-900">₺{{ "{:,.2f}".format(result.overtime_pay) }}</span>
                </div>
                <div class="pt-3 border-t border-slate-50 flex justify-between font-bold text-slate-900">
                    <span>Toplam Brüt</span>
                    <span>₺{{ "{:,.2f}".format(result.net_salary + result.overtime_pay) }}</span>
                </div>
            </div>
        </div>

        <!-- Deductions -->
        <div>
            <h3 class="text-sm font-bold text-slate-900 mb-4 border-b border-slate-100 pb-2">Kesintiler</h3>
            <div class="space-y-3">
                <div class="flex justify-between text-sm">
                    <span class="text-slate-600">Devamsızlık/Eksik Saat</span>
                    <span class="font-medium text-red-600">- ₺{{ "{:,.2f}".format(result.absence_deductions) }}</span>
                </div>
                {% for detail in deduction_details %}
                <div class="flex justify-between text-sm">
                    <span class="text-slate-600">{{ detail.type }}</span>
                    <span class="font-medium text-red-600">- ₺{{ "{:,.2f}".format(detail.amount) }}</span>
                </div>
                {% endfor %}
                <div class="pt-3 border-t border-slate-50 flex justify-between font-bold text-slate-900">
                    <span>Toplam Kesinti</span>
                    <span class="text-red-600">- ₺{{ "{:,.2f}".format(result.deductions) }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Total -->
    <div class="bg-primary/5 border border-primary/10 rounded-2xl p-6 flex justify-between items-center mb-12">
        <div>
            <p class="text-sm text-primary/70 font-medium">Ödenecek Net Tutar</p>
            <p class="text-xs text-slate-500 mt-1">Yalnızca: {{ net_tutar_yazi }}</p>
        </div>
        <div class="text-right">
            <span class="text-3xl font-bold text-primary">₺{{ "{:,.2f}".format(result.payroll) }}</span>
        </div>
    </div>

    <!-- Signatures -->
    <div class="grid grid-cols-2 gap-12 pt-12 border-t border-dashed border-slate-200">
        <div class="text-center">
            <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-16">İşveren / Kaşe İmza</p>
            <div class="w-48 border-b border-slate-300 mx-auto"></div>
        </div>
        <div class="text-center">
            <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-16">Personel İmza</p>
            <div class="w-48 border-b border-slate-300 mx-auto"></div>
            <p class="text-[10px] text-slate-400 mt-2">Yukarıdaki ödemeyi tam ve eksiksiz olarak aldım.</p>
        </div>
    </div>

    <!-- Print Button (Hidden on Print) -->
    <div class="mt-12 flex justify-center print:hidden gap-4">
        <button onclick="window.print()" class="flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-primary-dark transition-all shadow-lg shadow-primary/25">
            <span class="material-symbols-outlined">print</span>
            Yazdır / PDF Olarak Kaydet
        </button>
        <a href="/bordro" class="flex items-center gap-2 bg-slate-100 text-slate-700 px-6 py-3 rounded-xl font-bold hover:bg-slate-200 transition-all">
            <span class="material-symbols-outlined">arrow_back</span>
            Geri Dön
        </a>
    </div>
</div>

<style>
@media print {
    body {
        background: white !important;
    }
    nav, header, aside, .print\:hidden {
        display: none !important;
    }
    .flex-1 {
        overflow: visible !important;
    }
    main {
        padding: 0 !important;
        margin: 0 !important;
    }
}
</style>
{% endblock %}
